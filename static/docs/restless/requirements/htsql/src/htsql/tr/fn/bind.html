<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>bind.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>bind.py</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-0'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-0">#</a>
        </div>
        <p>Copyright (c) 2006-2011, Prometheus Research, LLC
See <code>LICENSE</code> for license information, <code>AUTHORS</code> for the list of authors.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-1'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-1">#</a>
        </div>
        <h1>:mod:<code>htsql.tr.fn.bind</code></h1>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="kn">from</span> <span class="nn">...util</span> <span class="kn">import</span> <span class="n">aresubclasses</span>
<span class="kn">from</span> <span class="nn">...adapter</span> <span class="kn">import</span> <span class="n">Adapter</span><span class="p">,</span> <span class="n">Component</span><span class="p">,</span> <span class="n">adapts</span><span class="p">,</span> <span class="n">adapts_many</span><span class="p">,</span> <span class="n">named</span>
<span class="kn">from</span> <span class="nn">...domain</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Domain</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span> <span class="n">BooleanDomain</span><span class="p">,</span> <span class="n">StringDomain</span><span class="p">,</span>
                       <span class="n">IntegerDomain</span><span class="p">,</span> <span class="n">DecimalDomain</span><span class="p">,</span> <span class="n">FloatDomain</span><span class="p">,</span>
                       <span class="n">DateDomain</span><span class="p">,</span> <span class="n">TimeDomain</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">,</span> <span class="n">EnumDomain</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">..syntax</span> <span class="kn">import</span> <span class="p">(</span><span class="n">NumberSyntax</span><span class="p">,</span> <span class="n">StringSyntax</span><span class="p">,</span> <span class="n">IdentifierSyntax</span><span class="p">,</span>
                      <span class="n">ReferenceSyntax</span><span class="p">,</span> <span class="n">SpecifierSyntax</span><span class="p">,</span> <span class="n">ApplicationSyntax</span><span class="p">,</span>
                      <span class="n">FunctionSyntax</span><span class="p">,</span> <span class="n">GroupSyntax</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">..binding</span> <span class="kn">import</span> <span class="p">(</span><span class="n">LiteralBinding</span><span class="p">,</span> <span class="n">SortBinding</span><span class="p">,</span> <span class="n">SieveBinding</span><span class="p">,</span>
                       <span class="n">FormulaBinding</span><span class="p">,</span> <span class="n">CastBinding</span><span class="p">,</span> <span class="n">WrappingBinding</span><span class="p">,</span>
                       <span class="n">TitleBinding</span><span class="p">,</span> <span class="n">DirectionBinding</span><span class="p">,</span> <span class="n">QuotientBinding</span><span class="p">,</span>
                       <span class="n">AssignmentBinding</span><span class="p">,</span> <span class="n">DefinitionBinding</span><span class="p">,</span> <span class="n">AliasBinding</span><span class="p">,</span>
                       <span class="n">SelectionBinding</span><span class="p">,</span> <span class="n">HomeBinding</span><span class="p">,</span> <span class="n">RescopingBinding</span><span class="p">,</span>
                       <span class="n">CoverBinding</span><span class="p">,</span> <span class="n">ForkBinding</span><span class="p">,</span> <span class="n">LinkBinding</span><span class="p">,</span>
                       <span class="n">CommandBinding</span><span class="p">,</span> <span class="n">SegmentBinding</span><span class="p">,</span> <span class="n">QueryBinding</span><span class="p">,</span> <span class="n">Binding</span><span class="p">,</span>
                       <span class="n">BindingRecipe</span><span class="p">,</span> <span class="n">ComplementRecipe</span><span class="p">,</span> <span class="n">KernelRecipe</span><span class="p">,</span>
                       <span class="n">SubstitutionRecipe</span><span class="p">,</span> <span class="n">ClosedRecipe</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">..bind</span> <span class="kn">import</span> <span class="n">BindByName</span><span class="p">,</span> <span class="n">BindByRecipe</span><span class="p">,</span> <span class="n">BindingState</span>
<span class="kn">from</span> <span class="nn">..error</span> <span class="kn">import</span> <span class="n">BindError</span>
<span class="kn">from</span> <span class="nn">..coerce</span> <span class="kn">import</span> <span class="nb">coerce</span>
<span class="kn">from</span> <span class="nn">..lookup</span> <span class="kn">import</span> <span class="p">(</span><span class="n">lookup_attribute</span><span class="p">,</span> <span class="n">lookup_complement</span><span class="p">,</span> <span class="n">direct</span><span class="p">,</span> <span class="n">expand</span><span class="p">,</span>
                      <span class="n">guess_name</span><span class="p">,</span> <span class="n">lookup_command</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">..signature</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Signature</span><span class="p">,</span> <span class="n">NullarySig</span><span class="p">,</span> <span class="n">UnarySig</span><span class="p">,</span> <span class="n">BinarySig</span><span class="p">,</span>
                         <span class="n">CompareSig</span><span class="p">,</span> <span class="n">IsEqualSig</span><span class="p">,</span> <span class="n">IsTotallyEqualSig</span><span class="p">,</span> <span class="n">IsInSig</span><span class="p">,</span>
                         <span class="n">IsNullSig</span><span class="p">,</span> <span class="n">IfNullSig</span><span class="p">,</span> <span class="n">NullIfSig</span><span class="p">,</span> <span class="n">AndSig</span><span class="p">,</span> <span class="n">OrSig</span><span class="p">,</span>
                         <span class="n">NotSig</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.signature</span> <span class="kn">import</span> <span class="p">(</span><span class="n">FiberSig</span><span class="p">,</span> <span class="n">AsSig</span><span class="p">,</span> <span class="n">SortDirectionSig</span><span class="p">,</span> <span class="n">LimitSig</span><span class="p">,</span>
                        <span class="n">SortSig</span><span class="p">,</span> <span class="n">CastSig</span><span class="p">,</span> <span class="n">MakeDateSig</span><span class="p">,</span> <span class="n">MakeDateTimeSig</span><span class="p">,</span>
                        <span class="n">CombineDateTimeSig</span><span class="p">,</span>
                        <span class="n">ExtractYearSig</span><span class="p">,</span> <span class="n">ExtractMonthSig</span><span class="p">,</span> <span class="n">ExtractDaySig</span><span class="p">,</span>
                        <span class="n">ExtractHourSig</span><span class="p">,</span> <span class="n">ExtractMinuteSig</span><span class="p">,</span> <span class="n">ExtractSecondSig</span><span class="p">,</span>
                        <span class="n">AddSig</span><span class="p">,</span> <span class="n">ConcatenateSig</span><span class="p">,</span>
                        <span class="n">HeadSig</span><span class="p">,</span> <span class="n">TailSig</span><span class="p">,</span> <span class="n">SliceSig</span><span class="p">,</span> <span class="n">AtSig</span><span class="p">,</span> <span class="n">ReplaceSig</span><span class="p">,</span>
                        <span class="n">UpperSig</span><span class="p">,</span> <span class="n">LowerSig</span><span class="p">,</span> <span class="n">TrimSig</span><span class="p">,</span>
                        <span class="n">DateIncrementSig</span><span class="p">,</span> <span class="n">DateTimeIncrementSig</span><span class="p">,</span>
                        <span class="n">SubtractSig</span><span class="p">,</span> <span class="n">DateDecrementSig</span><span class="p">,</span> <span class="n">DateTimeDecrementSig</span><span class="p">,</span>
                        <span class="n">DateDifferenceSig</span><span class="p">,</span> <span class="n">TodaySig</span><span class="p">,</span> <span class="n">NowSig</span><span class="p">,</span>
                        <span class="n">MultiplySig</span><span class="p">,</span> <span class="n">DivideSig</span><span class="p">,</span> <span class="n">IfSig</span><span class="p">,</span> <span class="n">SwitchSig</span><span class="p">,</span>
                        <span class="n">KeepPolaritySig</span><span class="p">,</span> <span class="n">ReversePolaritySig</span><span class="p">,</span>
                        <span class="n">RoundSig</span><span class="p">,</span> <span class="n">RoundToSig</span><span class="p">,</span> <span class="n">TruncSig</span><span class="p">,</span> <span class="n">TruncToSig</span><span class="p">,</span> <span class="n">LengthSig</span><span class="p">,</span>
                        <span class="n">ContainsSig</span><span class="p">,</span> <span class="n">ExistsSig</span><span class="p">,</span> <span class="n">CountSig</span><span class="p">,</span> <span class="n">MinMaxSig</span><span class="p">,</span>
                        <span class="n">SumSig</span><span class="p">,</span> <span class="n">AvgSig</span><span class="p">,</span> <span class="n">AggregateSig</span><span class="p">,</span> <span class="n">QuantifySig</span><span class="p">,</span>
                        <span class="n">QuotientSig</span><span class="p">,</span> <span class="n">AssignmentSig</span><span class="p">,</span> <span class="n">DefineSig</span><span class="p">,</span>
                        <span class="n">WhereSig</span><span class="p">,</span> <span class="n">SelectSig</span><span class="p">,</span> <span class="n">LinkSig</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">...cmd.command</span> <span class="kn">import</span> <span class="p">(</span><span class="n">DefaultCmd</span><span class="p">,</span> <span class="n">RetrieveCmd</span><span class="p">,</span> <span class="n">TextCmd</span><span class="p">,</span> <span class="n">HTMLCmd</span><span class="p">,</span> <span class="n">JSONCmd</span><span class="p">,</span>
                            <span class="n">CSVCmd</span><span class="p">,</span> <span class="n">TSVCmd</span><span class="p">,</span> <span class="n">SQLCmd</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">sys</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-2'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-2">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindFunction</span><span class="p">(</span><span class="n">BindByName</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">help</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-3'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-3">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">ApplicationSyntax</span><span class="p">):</span>
            <span class="n">operands</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">arguments</span><span class="p">[:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">operands</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">name</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">operands</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_mandatory</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;missing argument </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">elif</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">operands</span><span class="p">[:]</span>
                    <span class="n">operands</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
            <span class="n">arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">operands</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;unexpected argument&quot;</span><span class="p">,</span> <span class="n">operands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">arguments</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-4'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-4">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">()</span>
        <span class="n">bound_arguments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">name</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">bound_value</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">bound_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-5'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-5">#</a>
        </div>
        <p>if expand(bound_value) is not None:
   raise BindError("unexpected list argument",
                   value.mark)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">bound_value</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                    <span class="n">bound_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="n">recipies</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">bound_value</span><span class="p">,</span> <span class="n">is_hard</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_mandatory</span> <span class="ow">and</span> <span class="p">(</span><span class="n">recipies</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                                              <span class="ow">not</span> <span class="n">recipies</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;missing argument </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span>
                                        <span class="n">value</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">recipies</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">bound_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">bound_value</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bound_value</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">syntax</span><span class="p">,</span> <span class="n">recipe</span> <span class="ow">in</span> <span class="n">recipies</span><span class="p">:</span>
                            <span class="n">bind</span> <span class="o">=</span> <span class="n">BindByRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">syntax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
                            <span class="n">bound_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bind</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bound_value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">bound_arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bound_value</span>
        <span class="k">return</span> <span class="n">bound_arguments</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-6'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-6">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">arguments</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-7'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-7">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">correlate</span><span class="p">(</span><span class="o">**</span><span class="n">arguments</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-8'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-8">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindMacro</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-9'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-9">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">arguments</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-10'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-10">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="o">**</span><span class="n">arguments</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-11'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-11">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindMonoFunction</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-12'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-12">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">arguments</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">codomain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="n">cast_arguments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">domain</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domains</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">name</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
            <span class="n">cast_arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="nb">coerce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">codomain</span><span class="p">),</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="o">**</span><span class="n">cast_arguments</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-13'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-13">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindHomoFunction</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">codomain</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-14'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-14">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">arguments</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">name</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">domains</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">domains</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">domain</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="o">*</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">domain</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;incompatible arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">cast_arguments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">name</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
            <span class="n">cast_arguments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">codomain</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">codomain</span> <span class="o">=</span> <span class="n">domain</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">codomain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">codomain</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span> <span class="n">codomain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="o">**</span><span class="n">cast_arguments</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-15'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-15">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">Correlate</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="n">input_signature</span> <span class="o">=</span> <span class="n">Signature</span>
    <span class="n">input_domains</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">input_arity</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@classmethod</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-16'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-16">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">dominates</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">component</span><span class="o">.</span><span class="n">input_signature</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">input_signature</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">input_signature</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">input_signature</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">component</span><span class="o">.</span><span class="n">input_signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">other</span><span class="o">.</span><span class="n">input_signature</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="nd">@classmethod</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-17'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-17">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">dispatch_key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">component</span><span class="o">.</span><span class="n">input_signature</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">key_signature</span><span class="p">,</span> <span class="n">key_domain_vector</span> <span class="o">=</span> <span class="n">dispatch_key</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">key_signature</span><span class="p">,</span> <span class="n">component</span><span class="o">.</span><span class="n">input_signature</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_domain_vector</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">component</span><span class="o">.</span><span class="n">input_arity</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">key_domain_vector</span> <span class="o">=</span> <span class="n">key_domain_vector</span><span class="p">[:</span><span class="n">component</span><span class="o">.</span><span class="n">input_arity</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">domain_vector</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">input_domains</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">aresubclasses</span><span class="p">(</span><span class="n">key_domain_vector</span><span class="p">,</span> <span class="n">domain_vector</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="nd">@classmethod</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-18'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-18">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="n">binding</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="n">FormulaBinding</span><span class="p">)</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">binding</span><span class="o">.</span><span class="n">signature</span><span class="p">)</span>
        <span class="n">domain_vector</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">is_mandatory</span> <span class="ow">and</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">binding</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="n">slot</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
            <span class="n">domain_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">domain_vector</span><span class="p">))</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-19'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-19">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binding</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="n">FormulaBinding</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">BindingState</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binding</span> <span class="o">=</span> <span class="n">binding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="n">arguments</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-20'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-20">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;incompatible arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binding</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-21'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-21">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">def</span> <span class="nf">correlates</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="o">*</span><span class="n">domain_vectors</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">Signature</span><span class="p">)</span>
    <span class="n">domain_vectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">domain_vector</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">domain_vector</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
                                  <span class="k">else</span> <span class="p">(</span><span class="n">domain_vector</span><span class="p">,)</span>
                      <span class="k">for</span> <span class="n">domain_vector</span> <span class="ow">in</span> <span class="n">domain_vectors</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain_vectors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">arity</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain_vectors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain_vector</span><span class="p">)</span> <span class="o">==</span> <span class="n">arity</span>
               <span class="k">for</span> <span class="n">domain_vector</span> <span class="ow">in</span> <span class="n">domain_vectors</span><span class="p">)</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s">&#39;input_signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s">&#39;input_domains&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain_vectors</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s">&#39;input_arity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arity</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-22'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-22">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">def</span> <span class="nf">correlates_none</span><span class="p">():</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s">&#39;input_signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s">&#39;input_domains&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s">&#39;input_arity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-23'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-23">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateFunction</span><span class="p">(</span><span class="n">Correlate</span><span class="p">):</span>

    <span class="n">correlates_none</span><span class="p">()</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">hint</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">help</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-24'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-24">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">binding</span><span class="o">.</span><span class="n">signature</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span><span class="o">.</span><span class="n">clone_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">admits</span><span class="p">(</span><span class="n">Binding</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">signature</span><span class="o">.</span><span class="n">slots</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="n">slot</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domains</span><span class="p">):</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domains</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">is_singular</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
            <span class="n">arguments</span><span class="p">[</span><span class="n">slot</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">binding</span><span class="o">.</span><span class="n">domain</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">codomain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">codomain</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="n">signature</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binding</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="o">**</span><span class="n">arguments</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-25'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-25">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindPolyFunction</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">UntypedDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-26'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-26">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">arguments</span><span class="p">):</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">codomain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                                 <span class="o">**</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">correlate</span> <span class="o">=</span> <span class="n">Correlate</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">correlate</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-27'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-27">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindCommand</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">UnarySig</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-28'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-28">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindRetrieve</span><span class="p">(</span><span class="n">BindCommand</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;retrieve&#39;</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-29'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-29">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">SegmentBinding</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;a segment is required&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">QueryBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">RetrieveCmd</span><span class="p">(</span><span class="n">binding</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CommandBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-30'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-30">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindFormat</span><span class="p">(</span><span class="n">BindCommand</span><span class="p">):</span>

    <span class="n">command</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-31'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-31">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
        <span class="n">producer</span> <span class="o">=</span> <span class="n">lookup_command</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">producer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">SegmentBinding</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;a segment is required&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">binding</span> <span class="o">=</span> <span class="n">QueryBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
            <span class="n">producer</span> <span class="o">=</span> <span class="n">DefaultCmd</span><span class="p">(</span><span class="n">binding</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CommandBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-32'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-32">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindText</span><span class="p">(</span><span class="n">BindFormat</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;txt&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">TextCmd</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-33'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-33">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindHTML</span><span class="p">(</span><span class="n">BindFormat</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;html&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">HTMLCmd</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-34'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-34">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindJSON</span><span class="p">(</span><span class="n">BindFormat</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;json&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">JSONCmd</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-35'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-35">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindCSV</span><span class="p">(</span><span class="n">BindFormat</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;csv&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">CSVCmd</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-36'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-36">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindTSV</span><span class="p">(</span><span class="n">BindFormat</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;tsv&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">TSVCmd</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-37'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-37">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindSQL</span><span class="p">(</span><span class="n">BindFormat</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;sql&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">SQLCmd</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-38'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-38">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindNull</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;null&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;null&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullarySig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;null() -&gt; NULL&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-39'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-39">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">LiteralBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">None</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-40'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-40">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindTrue</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullarySig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;true() -&gt; TRUE&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-41'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-41">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">LiteralBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">True</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">BooleanDomain</span><span class="p">()),</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-42'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-42">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindFalse</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;false&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;false&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullarySig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;false() -&gt; FALSE&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-43'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-43">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">LiteralBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">False</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">BooleanDomain</span><span class="p">()),</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-44'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-44">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindRoot</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;root&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullarySig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.root() -&gt; the root space&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-45'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-45">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WrappingBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-46'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-46">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindThis</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;this&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullarySig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.this() -&gt; the current base space&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-47'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-47">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WrappingBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-48'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-48">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindHome</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;home&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullarySig</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-49'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-49">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">HomeBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-50'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-50">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindDistinct</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;distinct&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">UnarySig</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-51'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-51">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
        <span class="n">recipes</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="n">is_hard</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">recipes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;a selector is required&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">kernels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">syntax</span><span class="p">,</span> <span class="n">recipe</span> <span class="ow">in</span> <span class="n">recipes</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">syntax</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">RescopingBinding</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">seed</span><span class="p">,</span> <span class="n">element</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">domain</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;invalid element type&quot;</span><span class="p">,</span> <span class="n">element</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">element</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
            <span class="n">kernels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="n">quotient</span> <span class="o">=</span> <span class="n">QuotientBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="n">seed</span><span class="p">,</span> <span class="n">kernels</span><span class="p">,</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">quotient</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">guess_name</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">recipe</span> <span class="o">=</span> <span class="n">ComplementRecipe</span><span class="p">(</span><span class="n">quotient</span><span class="p">)</span>
            <span class="n">recipe</span> <span class="o">=</span> <span class="n">ClosedRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">)</span>
            <span class="n">binding</span> <span class="o">=</span> <span class="n">DefinitionBinding</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">recipe</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">kernel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">kernels</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">guess_name</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">recipe</span> <span class="o">=</span> <span class="n">KernelRecipe</span><span class="p">(</span><span class="n">quotient</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                <span class="n">recipe</span> <span class="o">=</span> <span class="n">ClosedRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">)</span>
                <span class="n">binding</span> <span class="o">=</span> <span class="n">DefinitionBinding</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">recipe</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">binding</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-52'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-52">#</a>
        </div>
        <p>def expand(self, base, title):
<pre>if not isinstance(title, (StringSyntax, IdentifierSyntax)):
raise BindError("expected a string literal or an identifier",
title.mark)
base = self.state.bind(base)
return TitleBinding(base, title.value, self.syntax)
</pre></p>
<p>class BindSieve(BindMacro):</p>
<p>named('?')
signature = BinarySig</p>
<p>def expand(self, lop, rop):
base = self.state.bind(lop)
filter = self.state.bind(rop, base)
filter = CastBinding(filter, coerce(BooleanDomain()), filter.syntax)
return SieveBinding(base, filter, self.syntax)</p>
<p>class BindFilter(BindMacro):</p>
<p>named('filter')
signature = UnarySig</p>
<p>def expand(self, op):
filter = self.state.bind(op)
filter = CastBinding(filter, coerce(BooleanDomain()), filter.syntax)
return SieveBinding(self.state.scope, filter, self.syntax)</p>
<p>class BindSelect(BindMacro):</p>
<p>named('select')
signature = SelectSig</p>
<p>def expand(self, ops):
elements = []
for op in ops:
element = self.state.bind(op)
recipies = expand(element, is_hard=False)
if recipies is not None:
for syntax, recipe in recipies:
if not isinstance(syntax, (IdentifierSyntax, GroupSyntax)):
syntax = GroupSyntax(syntax, syntax.mark)
syntax = SpecifierSyntax(element.syntax, syntax,
<pre>syntax.mark)
bind = BindByRecipe(recipe, syntax, self.state)
elements.append(bind())
else:
elements.append(element)
order = []
for element in elements:
direction = direct(element)
if direction is not None:
order.append(element)
base = self.state.scope
if order:
base = SortBinding(base, order, None, None, base.syntax)
return SelectionBinding(base, elements, base.syntax)
</pre></p>
<p>class BindMoniker(BindMacro):</p>
<p>named('moniker')
signature = LinkSig</p>
<p>def expand(self, seed):
seed = self.state.bind(seed)
return CoverBinding(self.state.scope, seed, self.syntax)</p>
<p>class BindFork(BindMacro):</p>
<p>named('fork')
signature = SelectSig</p>
<p>def expand(self, ops):
elements = []
for op in ops:
element = self.state.bind(op)
recipies = expand(element, is_hard=False)
if recipies is not None:
for syntax, recipe in recipies:
if not isinstance(syntax, (IdentifierSyntax, GroupSyntax)):
syntax = GroupSyntax(syntax, syntax.mark)
syntax = SpecifierSyntax(element.syntax, syntax,
syntax.mark)
bind = BindByRecipe(recipe, syntax, self.state)
elements.append(bind())
else:
elements.append(element)
return ForkBinding(self.state.scope, elements, self.syntax)</p>
<p>class BindDirectionBase(BindMacro):</p>
<p>signature = SortDirectionSig
direction = None</p>
<p>def expand(self, base):
base = self.state.bind(base)
return DirectionBinding(base, self.direction, self.syntax)</p>
<p>class BindAscDir(BindDirectionBase):</p>
<p>named('_+')
direction = +1
hint = """(expr +) -&gt; sort in ascending order"""
help = """
Decorates an expression with a sort order indicator.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindAs</span><span class="p">(</span><span class="n">BindMacro</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;as&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">AsSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;as(expr, title) -&gt; expression with a title&quot;&quot;&quot;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    Decorates an expression with a title.</span>

<span class="s">    `expr`: an arbitrary expression.</span>
<span class="s">    `title`: an identifier or a string literal.</span>
<span class="s">#DIVIDER</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindDescDir(BindDirectionBase):</span>

<span class="s">    named(&#39;_-&#39;)</span>
<span class="s">    direction = -1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">expr</span> <span class="o">-</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sort</span> <span class="ow">in</span> <span class="n">descending</span> <span class="n">order</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindLimit(BindMacro):</span>

<span class="s">    named(&#39;limit&#39;)</span>
<span class="s">    signature = LimitSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">base</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">N</span><span class="p">[,</span> <span class="n">skip</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">slice</span> <span class="n">of</span> <span class="n">the</span> <span class="n">base</span> <span class="n">space</span><span class="s">&quot;&quot;&quot;</span>


<span class="s">#DIVIDER</span>
<span class="s">    def parse(self, argument):</span>
<span class="s">        try:</span>
<span class="s">            if not isinstance(argument, NumberSyntax):</span>
<span class="s">                raise ValueError</span>
<span class="s">            value = int(argument.value)</span>
<span class="s">            if not (value &gt;= 0):</span>
<span class="s">                raise ValueError</span>
<span class="s">        except ValueError:</span>
<span class="s">            raise BindError(&quot;expected a non-negative integer&quot;, argument.mark)</span>
<span class="s">        return value</span>


<span class="s">#DIVIDER</span>
<span class="s">    def expand(self, limit, offset=None):</span>
<span class="s">        limit = self.parse(limit)</span>
<span class="s">        if offset is not None:</span>
<span class="s">            offset = self.parse(offset)</span>
<span class="s">        return SortBinding(self.state.scope, [], limit, offset, self.syntax)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindSort(BindMacro):</span>

<span class="s">    named(&#39;sort&#39;)</span>
<span class="s">    signature = SortSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">base</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">expr</span><span class="p">[,</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">sorted</span> <span class="n">space</span><span class="s">&quot;&quot;&quot;</span>


<span class="s">#DIVIDER</span>
<span class="s">    def expand(self, order):</span>
<span class="s">        bindings = []</span>
<span class="s">        for item in order:</span>
<span class="s">            binding = self.state.bind(item)</span>
<span class="s">            recipies = expand(binding, is_hard=False)</span>
<span class="s">            if recipies is None:</span>
<span class="s">                domain = coerce(binding.domain)</span>
<span class="s">                if domain is None:</span>
<span class="s">                    raise BindError(&quot;incompatible expression type&quot;,</span>
<span class="s">                                    binding.mark)</span>
<span class="s">                binding = CastBinding(binding, domain, binding.syntax)</span>
<span class="s">                bindings.append(binding)</span>
<span class="s">            else:</span>
<span class="s">                for syntax, recipe in recipies:</span>
<span class="s">                    bind = BindByRecipe(recipe, syntax, self.state)</span>
<span class="s">                    binding = bind()</span>
<span class="s">                    bindings.append(binding)</span>
<span class="s">        return SortBinding(self.state.scope, bindings, None, None, self.syntax)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindDefine(BindMacro):</span>

<span class="s">    named(&#39;define&#39;)</span>
<span class="s">    signature = DefineSig</span>


<span class="s">#DIVIDER</span>
<span class="s">    def expand(self, ops):</span>
<span class="s">        binding = self.state.scope</span>
<span class="s">        for op in ops:</span>
<span class="s">            assignment = self.state.bind(op, scope=binding)</span>
<span class="s">            if not isinstance(assignment, AssignmentBinding):</span>
<span class="s">                raise BindError(&quot;an assignment expected&quot;, op.mark)</span>
<span class="s">            name, is_reference = assignment.terms[0]</span>
<span class="s">            arity = None</span>
<span class="s">            if is_reference:</span>
<span class="s">                body = self.state.bind(assignment.body, scope=binding)</span>
<span class="s">                recipe = BindingRecipe(body)</span>
<span class="s">            else:</span>
<span class="s">                if (len(assignment.terms) == 1 and</span>
<span class="s">                        assignment.parameters is not None):</span>
<span class="s">                    arity = len(assignment.parameters)</span>
<span class="s">                recipe = SubstitutionRecipe(binding, assignment.terms[1:],</span>
<span class="s">                                            assignment.parameters,</span>
<span class="s">                                            assignment.body)</span>
<span class="s">            recipe = ClosedRecipe(recipe)</span>
<span class="s">            binding = DefinitionBinding(binding, name, is_reference, arity,</span>
<span class="s">                                        recipe, self.syntax)</span>
<span class="s">        return binding</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindWhere(BindMacro):</span>

<span class="s">    named(&#39;where&#39;)</span>
<span class="s">    signature = WhereSig</span>


<span class="s">#DIVIDER</span>
<span class="s">    def expand(self, lop, rops):</span>
<span class="s">        binding = self.state.scope</span>
<span class="s">        for op in rops:</span>
<span class="s">            assignment = self.state.bind(op, scope=binding)</span>
<span class="s">            if not isinstance(assignment, AssignmentBinding):</span>
<span class="s">                raise BindError(&quot;an assignment expected&quot;, op.mark)</span>
<span class="s">            name, is_reference = assignment.terms[0]</span>
<span class="s">            arity = None</span>
<span class="s">            if is_reference:</span>
<span class="s">                body = self.state.bind(assignment.body, scope=binding)</span>
<span class="s">                recipe = BindingRecipe(body)</span>
<span class="s">            else:</span>
<span class="s">                if (len(assignment.terms) == 1 and</span>
<span class="s">                        assignment.parameters is not None):</span>
<span class="s">                    arity = len(assignment.parameters)</span>
<span class="s">                recipe = SubstitutionRecipe(binding, assignment.terms[1:],</span>
<span class="s">                                            assignment.parameters,</span>
<span class="s">                                            assignment.body)</span>
<span class="s">            recipe = ClosedRecipe(recipe)</span>
<span class="s">            binding = DefinitionBinding(binding, name, is_reference, arity,</span>
<span class="s">                                        recipe, self.syntax)</span>
<span class="s">        return self.state.bind(lop, scope=binding)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindCast(BindFunction):</span>

<span class="s">    signature = CastSig</span>
<span class="s">    codomain = None</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, base):</span>
<span class="s">        domain = coerce(self.codomain)</span>
<span class="s">        return CastBinding(base, domain, self.syntax)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindBooleanCast(BindCast):</span>

<span class="s">    named(&#39;boolean&#39;, &#39;bool&#39;)</span>
<span class="s">    codomain = BooleanDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">boolean</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expression</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">Boolean</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindStringCast(BindCast):</span>

<span class="s">    named(&#39;string&#39;, &#39;str&#39;)</span>
<span class="s">    codomain = StringDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">string</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expression</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">a</span> <span class="n">string</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindIntegerCast(BindCast):</span>

<span class="s">    named(&#39;integer&#39;, &#39;int&#39;)</span>
<span class="s">    codomain = IntegerDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">integer</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expression</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">integer</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindDecimalCast(BindCast):</span>

<span class="s">    named(&#39;decimal&#39;, &#39;dec&#39;)</span>
<span class="s">    codomain = DecimalDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">decimal</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expression</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">decimal</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindFloatCast(BindCast):</span>

<span class="s">    named(&#39;float&#39;)</span>
<span class="s">    codomain = FloatDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="nb">float</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expression</span> <span class="n">converted</span> <span class="n">to</span> <span class="nb">float</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindDateCast(BindCast):</span>

<span class="s">    named(&#39;date&#39;)</span>
<span class="s">    codomain = DateDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">date</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expression</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">date</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTimeCast(BindCast):</span>

<span class="s">    named(&#39;time&#39;)</span>
<span class="s">    codomain = TimeDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindDateTimeCast(BindCast):</span>

<span class="s">    named(&#39;datetime&#39;)</span>
<span class="s">    codomain = DateTimeDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindMakeDate(BindMonoFunction):</span>

<span class="s">    named((&#39;date&#39;, 3))</span>
<span class="s">    signature = MakeDateSig</span>
<span class="s">    domains = [IntegerDomain(), IntegerDomain(), IntegerDomain()]</span>
<span class="s">    codomain = DateDomain()</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date</span> <span class="n">value</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindMakeDateTime(BindMonoFunction):</span>

<span class="s">    named((&#39;datetime&#39;, 3),</span>
<span class="s">          (&#39;datetime&#39;, 4),</span>
<span class="s">          (&#39;datetime&#39;, 5),</span>
<span class="s">          (&#39;datetime&#39;, 6))</span>
<span class="s">    signature = MakeDateTimeSig</span>
<span class="s">    domains = [IntegerDomain(), IntegerDomain(), IntegerDomain(),</span>
<span class="s">               IntegerDomain(), IntegerDomain(), FloatDomain()]</span>
<span class="s">    codomain = DateTimeDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindCombineDateTime(BindMonoFunction):</span>

<span class="s">    named((&#39;datetime&#39;, 2))</span>
<span class="s">    signature = CombineDateTimeSig</span>
<span class="s">    domains = [DateDomain(), TimeDomain()]</span>
<span class="s">    codomain = DateTimeDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindAmongBase(BindFunction):</span>

<span class="s">    signature = IsInSig</span>
<span class="s">    polarity = None</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, lop, rops):</span>
<span class="s">        domain = coerce(lop.domain, *(rop.domain for rop in rops))</span>
<span class="s">        if domain is None:</span>
<span class="s">            raise BindError(&quot;incompatible arguments&quot;, self.syntax.mark)</span>
<span class="s">        lop = CastBinding(lop, domain, lop.syntax)</span>
<span class="s">        rops = [CastBinding(rop, domain, rop.syntax) for rop in rops]</span>
<span class="s">        if len(rops) == 1:</span>
<span class="s">            return FormulaBinding(self.state.scope,</span>
<span class="s">                                  IsEqualSig(self.polarity),</span>
<span class="s">                                  coerce(BooleanDomain()),</span>
<span class="s">                                  self.syntax, lop=lop, rop=rops[0])</span>
<span class="s">        else:</span>
<span class="s">            return FormulaBinding(self.state.scope,</span>
<span class="s">                                  self.signature(self.polarity),</span>
<span class="s">                                  coerce(BooleanDomain()),</span>
<span class="s">                                  self.syntax, lop=lop, rops=rops)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindAmong(BindAmongBase):</span>

<span class="s">    named(&#39;=&#39;)</span>
<span class="s">    polarity = +1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindNotAmong(BindAmongBase):</span>

<span class="s">    named(&#39;!=&#39;)</span>
<span class="s">    polarity = -1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTotallyEqualBase(BindFunction):</span>

<span class="s">    signature = IsTotallyEqualSig</span>
<span class="s">    polarity = None</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, lop, rop):</span>
<span class="s">        domain = coerce(lop.domain, rop.domain)</span>
<span class="s">        if domain is None:</span>
<span class="s">            raise BindError(&quot;incompatible arguments&quot;, self.syntax.mark)</span>
<span class="s">        lop = CastBinding(lop, domain, lop.syntax)</span>
<span class="s">        rop = CastBinding(rop, domain, rop.syntax)</span>
<span class="s">        return FormulaBinding(self.state.scope,</span>
<span class="s">                              IsTotallyEqualSig(self.polarity),</span>
<span class="s">                              coerce(BooleanDomain()), self.syntax,</span>
<span class="s">                              lop=lop, rop=rop)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTotallyEqual(BindTotallyEqualBase):</span>

<span class="s">    named(&#39;==&#39;)</span>
<span class="s">    polarity = +1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTotallyNotEqual(BindTotallyEqualBase):</span>

<span class="s">    named(&#39;!==&#39;)</span>
<span class="s">    polarity = -1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">!==</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindAnd(BindFunction):</span>

<span class="s">    named(&#39;&amp;&#39;)</span>
<span class="s">    signature = BinarySig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">p</span> <span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">both</span> <span class="n">p</span> <span class="ow">and</span> <span class="n">q</span> <span class="n">are</span> <span class="n">TRUE</span><span class="s">&quot;&quot;&quot;</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, lop, rop):</span>
<span class="s">        domain = coerce(BooleanDomain())</span>
<span class="s">        lop = CastBinding(lop, domain, lop.syntax)</span>
<span class="s">        rop = CastBinding(rop, domain, rop.syntax)</span>
<span class="s">        return FormulaBinding(self.state.scope,</span>
<span class="s">                              AndSig(), domain, self.syntax, ops=[lop, rop])</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindOr(BindFunction):</span>

<span class="s">    named(&#39;|&#39;)</span>
<span class="s">    signature = BinarySig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">p</span> <span class="o">|</span> <span class="n">q</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">either</span> <span class="n">p</span> <span class="ow">or</span> <span class="n">q</span> <span class="ow">is</span> <span class="n">TRUE</span><span class="s">&quot;&quot;&quot;</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, lop, rop):</span>
<span class="s">        domain = coerce(BooleanDomain())</span>
<span class="s">        lop = CastBinding(lop, domain, lop.syntax)</span>
<span class="s">        rop = CastBinding(rop, domain, rop.syntax)</span>
<span class="s">        return FormulaBinding(self.state.scope,</span>
<span class="s">                              OrSig(), domain, self.syntax, ops=[lop, rop])</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindNot(BindFunction):</span>

<span class="s">    named(&#39;!_&#39;)</span>
<span class="s">    signature = NotSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="err">!</span> <span class="n">p</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="n">FALSE</span><span class="s">&quot;&quot;&quot;</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, op):</span>
<span class="s">        domain = coerce(BooleanDomain())</span>
<span class="s">        op = CastBinding(op, domain, op.syntax)</span>
<span class="s">        return FormulaBinding(self.state.scope,</span>
<span class="s">                              self.signature(), domain, self.syntax, op=op)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindCompare(BindFunction):</span>

<span class="s">    signature = CompareSig</span>
<span class="s">    relation = None</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, lop, rop):</span>
<span class="s">        domain = coerce(lop.domain, rop.domain)</span>
<span class="s">        if domain is None:</span>
<span class="s">            raise BindError(&quot;incompatible arguments&quot;, self.syntax.mark)</span>
<span class="s">        lop = CastBinding(lop, domain, lop.syntax)</span>
<span class="s">        rop = CastBinding(rop, domain, rop.syntax)</span>
<span class="s">        comparable = Comparable(domain)</span>
<span class="s">        if not comparable():</span>
<span class="s">            raise BindError(&quot;uncomparable arguments&quot;, self.syntax.mark)</span>
<span class="s">        return FormulaBinding(self.state.scope,</span>
<span class="s">                              self.signature(self.relation),</span>
<span class="s">                              coerce(BooleanDomain()),</span>
<span class="s">                              self.syntax, lop=lop, rop=rop)</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindLessThan(BindCompare):</span>

<span class="s">    named(&#39;&lt;&#39;)</span>
<span class="s">    relation = &#39;&lt;&#39;</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">less</span> <span class="n">than</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindLessThanOrEqual(BindCompare):</span>

<span class="s">    named(&#39;&lt;=&#39;)</span>
<span class="s">    relation = &#39;&lt;=&#39;</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">less</span> <span class="n">than</span> <span class="ow">or</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindGreaterThan(BindCompare):</span>

<span class="s">    named(&#39;&gt;&#39;)</span>
<span class="s">    relation = &#39;&gt;&#39;</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">greater</span> <span class="n">than</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindGreaterThanOrEqual(BindCompare):</span>

<span class="s">    named(&#39;&gt;=&#39;)</span>
<span class="s">    relation = &#39;&gt;=&#39;</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">greater</span> <span class="n">than</span> <span class="ow">or</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class Comparable(Adapter):</span>

<span class="s">    adapts(Domain)</span>


<span class="s">#DIVIDER</span>
<span class="s">    def __init__(self, domain):</span>
<span class="s">        self.domain = domain</span>


<span class="s">#DIVIDER</span>
<span class="s">    def __call__(self):</span>
<span class="s">        return False</span>



<span class="s">#DIVIDER</span>
<span class="s">class ComparableDomains(Comparable):</span>

<span class="s">    adapts_many(IntegerDomain, DecimalDomain, FloatDomain,</span>
<span class="s">                StringDomain, EnumDomain, DateDomain, TimeDomain,</span>
<span class="s">                DateTimeDomain)</span>


<span class="s">#DIVIDER</span>
<span class="s">    def __call__(self):</span>
<span class="s">        return True</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindAdd(BindPolyFunction):</span>

<span class="s">    named(&#39;+&#39;)</span>
<span class="s">    signature = AddSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateIntegerAdd(CorrelateFunction):</span>

<span class="s">    correlates(AddSig, (IntegerDomain, IntegerDomain))</span>
<span class="s">    signature = AddSig</span>
<span class="s">    domains = [IntegerDomain(), IntegerDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalAdd(CorrelateFunction):</span>

<span class="s">    correlates(AddSig, (IntegerDomain, DecimalDomain),</span>
<span class="s">                       (DecimalDomain, IntegerDomain),</span>
<span class="s">                       (DecimalDomain, DecimalDomain))</span>
<span class="s">    signature = AddSig</span>
<span class="s">    domains = [DecimalDomain(), DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatAdd(CorrelateFunction):</span>

<span class="s">    correlates(AddSig, (IntegerDomain, FloatDomain),</span>
<span class="s">                       (DecimalDomain, FloatDomain),</span>
<span class="s">                       (FloatDomain, IntegerDomain),</span>
<span class="s">                       (FloatDomain, DecimalDomain),</span>
<span class="s">                       (FloatDomain, FloatDomain))</span>
<span class="s">    signature = AddSig</span>
<span class="s">    domains = [FloatDomain(), FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDateIncrement(CorrelateFunction):</span>

<span class="s">    correlates(AddSig, (DateDomain, IntegerDomain))</span>
<span class="s">    signature = DateIncrementSig</span>
<span class="s">    domains = [DateDomain(), IntegerDomain()]</span>
<span class="s">    codomain = DateDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDateTimeIncrement(CorrelateFunction):</span>

<span class="s">    correlates(AddSig, (DateTimeDomain, IntegerDomain),</span>
<span class="s">                       (DateTimeDomain, DecimalDomain),</span>
<span class="s">                       (DateTimeDomain, FloatDomain))</span>
<span class="s">    signature = DateTimeIncrementSig</span>
<span class="s">    domains = [DateTimeDomain(), FloatDomain()]</span>
<span class="s">    codomain = DateTimeDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateConcatenate(CorrelateFunction):</span>

<span class="s">    correlates(AddSig, (UntypedDomain, UntypedDomain),</span>
<span class="s">                       (UntypedDomain, StringDomain),</span>
<span class="s">                       (StringDomain, UntypedDomain),</span>
<span class="s">                       (StringDomain, StringDomain))</span>
<span class="s">    signature = ConcatenateSig</span>
<span class="s">    domains = [StringDomain(), StringDomain()]</span>
<span class="s">    codomain = StringDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindSubtract(BindPolyFunction):</span>

<span class="s">    named(&#39;-&#39;)</span>
<span class="s">    signature = SubtractSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">difference</span> <span class="n">between</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateIntegerSubtract(CorrelateFunction):</span>

<span class="s">    correlates(SubtractSig, (IntegerDomain, IntegerDomain))</span>
<span class="s">    signature = SubtractSig</span>
<span class="s">    domains = [IntegerDomain(), IntegerDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalSubtract(CorrelateFunction):</span>

<span class="s">    correlates(SubtractSig, (IntegerDomain, DecimalDomain),</span>
<span class="s">                            (DecimalDomain, IntegerDomain),</span>
<span class="s">                            (DecimalDomain, DecimalDomain))</span>
<span class="s">    signature = SubtractSig</span>
<span class="s">    domains = [DecimalDomain(), DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatSubtract(CorrelateFunction):</span>

<span class="s">    correlates(SubtractSig, (IntegerDomain, FloatDomain),</span>
<span class="s">                            (DecimalDomain, FloatDomain),</span>
<span class="s">                            (FloatDomain, IntegerDomain),</span>
<span class="s">                            (FloatDomain, DecimalDomain),</span>
<span class="s">                            (FloatDomain, FloatDomain))</span>
<span class="s">    signature = SubtractSig</span>
<span class="s">    domains = [FloatDomain(), FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDateDecrement(CorrelateFunction):</span>

<span class="s">    correlates(SubtractSig, (DateDomain, IntegerDomain))</span>
<span class="s">    signature = DateDecrementSig</span>
<span class="s">    domains = [DateDomain(), IntegerDomain()]</span>
<span class="s">    codomain = DateDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDateTimeDecrement(CorrelateFunction):</span>

<span class="s">    correlates(SubtractSig, (DateTimeDomain, IntegerDomain),</span>
<span class="s">                            (DateTimeDomain, DecimalDomain),</span>
<span class="s">                            (DateTimeDomain, FloatDomain))</span>
<span class="s">    signature = DateTimeDecrementSig</span>
<span class="s">    domains = [DateTimeDomain(), FloatDomain()]</span>
<span class="s">    codomain = DateTimeDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDateDifference(CorrelateFunction):</span>

<span class="s">    correlates(SubtractSig, (DateDomain, DateDomain))</span>
<span class="s">    signature = DateDifferenceSig</span>
<span class="s">    domains = [DateDomain(), DateDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindMultiply(BindPolyFunction):</span>

<span class="s">    named(&#39;*&#39;)</span>
<span class="s">    signature = MultiplySig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">product</span> <span class="n">of</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateIntegerMultiply(CorrelateFunction):</span>

<span class="s">    correlates(MultiplySig, (IntegerDomain, IntegerDomain))</span>
<span class="s">    signature = MultiplySig</span>
<span class="s">    domains = [IntegerDomain(), IntegerDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalMultiply(CorrelateFunction):</span>

<span class="s">    correlates(MultiplySig, (IntegerDomain, DecimalDomain),</span>
<span class="s">                            (DecimalDomain, IntegerDomain),</span>
<span class="s">                            (DecimalDomain, DecimalDomain))</span>
<span class="s">    signature = MultiplySig</span>
<span class="s">    domains = [DecimalDomain(), DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatMultiply(CorrelateFunction):</span>

<span class="s">    correlates(MultiplySig, (IntegerDomain, FloatDomain),</span>
<span class="s">                            (DecimalDomain, FloatDomain),</span>
<span class="s">                            (FloatDomain, IntegerDomain),</span>
<span class="s">                            (FloatDomain, DecimalDomain),</span>
<span class="s">                            (FloatDomain, FloatDomain))</span>
<span class="s">    signature = MultiplySig</span>
<span class="s">    domains = [FloatDomain(), FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindDivide(BindPolyFunction):</span>

<span class="s">    named(&#39;/&#39;)</span>
<span class="s">    signature = DivideSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">quotient</span> <span class="n">of</span> <span class="n">x</span> <span class="n">divided</span> <span class="n">by</span> <span class="n">y</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalDivide(CorrelateFunction):</span>

<span class="s">    correlates(DivideSig, (IntegerDomain, IntegerDomain),</span>
<span class="s">                          (IntegerDomain, DecimalDomain),</span>
<span class="s">                          (DecimalDomain, IntegerDomain),</span>
<span class="s">                          (DecimalDomain, DecimalDomain))</span>
<span class="s">    signature = DivideSig</span>
<span class="s">    domains = [DecimalDomain(), DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatDivide(CorrelateFunction):</span>

<span class="s">    correlates(DivideSig, (IntegerDomain, FloatDomain),</span>
<span class="s">                          (DecimalDomain, FloatDomain),</span>
<span class="s">                          (FloatDomain, IntegerDomain),</span>
<span class="s">                          (FloatDomain, DecimalDomain),</span>
<span class="s">                          (FloatDomain, FloatDomain))</span>
<span class="s">    signature = DivideSig</span>
<span class="s">    domains = [FloatDomain(), FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindKeepPolarity(BindPolyFunction):</span>

<span class="s">    named(&#39;+_&#39;)</span>
<span class="s">    signature = KeepPolaritySig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateIntegerKeepPolarity(CorrelateFunction):</span>

<span class="s">    correlates(KeepPolaritySig, IntegerDomain)</span>
<span class="s">    signature = KeepPolaritySig</span>
<span class="s">    domains = [IntegerDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalKeepPolarity(CorrelateFunction):</span>

<span class="s">    correlates(KeepPolaritySig, DecimalDomain)</span>
<span class="s">    signature = KeepPolaritySig</span>
<span class="s">    domains = [DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatKeepPolarity(CorrelateFunction):</span>

<span class="s">    correlates(KeepPolaritySig, FloatDomain)</span>
<span class="s">    signature = KeepPolaritySig</span>
<span class="s">    domains = [FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindReversePolarity(BindPolyFunction):</span>

<span class="s">    named(&#39;-_&#39;)</span>
<span class="s">    signature = ReversePolaritySig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">negation</span> <span class="n">of</span> <span class="n">x</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateIntegerReversePolarity(CorrelateFunction):</span>

<span class="s">    correlates(ReversePolaritySig, IntegerDomain)</span>
<span class="s">    signature = ReversePolaritySig</span>
<span class="s">    domains = [IntegerDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalReversePolarity(CorrelateFunction):</span>

<span class="s">    correlates(ReversePolaritySig, DecimalDomain)</span>
<span class="s">    signature = ReversePolaritySig</span>
<span class="s">    domains = [DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatReversePolarity(CorrelateFunction):</span>

<span class="s">    correlates(ReversePolaritySig, FloatDomain)</span>
<span class="s">    signature = ReversePolaritySig</span>
<span class="s">    domains = [FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindRound(BindPolyFunction):</span>

<span class="s">    named(&#39;round&#39;)</span>
<span class="s">    signature = RoundSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="n">rounded</span> <span class="n">to</span> <span class="n">zero</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalRound(CorrelateFunction):</span>

<span class="s">    correlates(RoundSig, IntegerDomain,</span>
<span class="s">                         DecimalDomain)</span>
<span class="s">    signature = RoundSig</span>
<span class="s">    domains = [DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatRound(CorrelateFunction):</span>

<span class="s">    correlates(RoundSig, FloatDomain)</span>
<span class="s">    signature = RoundSig</span>
<span class="s">    domains = [FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindRoundTo(BindPolyFunction):</span>

<span class="s">    named((&#39;round&#39;, 2))</span>
<span class="s">    signature = RoundToSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="n">rounded</span> <span class="n">to</span> <span class="n">a</span> <span class="n">given</span> <span class="n">precision</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalRoundTo(CorrelateFunction):</span>

<span class="s">    correlates(RoundToSig, (IntegerDomain, IntegerDomain),</span>
<span class="s">                           (DecimalDomain, IntegerDomain))</span>
<span class="s">    signature = RoundToSig</span>
<span class="s">    domains = [DecimalDomain(), IntegerDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTrunc(BindPolyFunction):</span>

<span class="s">    named(&#39;trunc&#39;)</span>
<span class="s">    signature = TruncSig</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalTrunc(CorrelateFunction):</span>

<span class="s">    correlates(TruncSig, IntegerDomain,</span>
<span class="s">                         DecimalDomain)</span>
<span class="s">    signature = TruncSig</span>
<span class="s">    domains = [DecimalDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateFloatTrunc(CorrelateFunction):</span>

<span class="s">    correlates(TruncSig, FloatDomain)</span>
<span class="s">    signature = TruncSig</span>
<span class="s">    domains = [FloatDomain()]</span>
<span class="s">    codomain = FloatDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTruncTo(BindPolyFunction):</span>

<span class="s">    named((&#39;trunc&#39;, 2))</span>
<span class="s">    signature = TruncToSig</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateDecimalTruncTo(CorrelateFunction):</span>

<span class="s">    correlates(TruncToSig, (IntegerDomain, IntegerDomain),</span>
<span class="s">                           (DecimalDomain, IntegerDomain))</span>
<span class="s">    signature = TruncToSig</span>
<span class="s">    domains = [DecimalDomain(), IntegerDomain()]</span>
<span class="s">    codomain = DecimalDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindLength(BindPolyFunction):</span>

<span class="s">    named(&#39;length&#39;)</span>
<span class="s">    signature = LengthSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">length</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">length</span> <span class="n">of</span> <span class="n">s</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateStringLength(CorrelateFunction):</span>

<span class="s">    correlates(LengthSig, StringDomain,</span>
<span class="s">                          UntypedDomain)</span>
<span class="s">    signature = LengthSig</span>
<span class="s">    domains = [StringDomain()]</span>
<span class="s">    codomain = IntegerDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindContainsBase(BindPolyFunction):</span>

<span class="s">    signature = ContainsSig</span>
<span class="s">    polarity = None</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, **arguments):</span>
<span class="s">        binding = FormulaBinding(self.state.scope,</span>
<span class="s">                                 self.signature(self.polarity),</span>
<span class="s">                                 self.codomain, self.syntax, **arguments)</span>
<span class="s">        correlate = Correlate(binding, self.state)</span>
<span class="s">        return correlate()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindContains(BindContainsBase):</span>

<span class="s">    named(&#39;~&#39;)</span>
<span class="s">    polarity = +1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">s</span> <span class="o">~</span> <span class="n">sub</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">s</span> <span class="n">contains</span> <span class="n">sub</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindNotContains(BindContainsBase):</span>

<span class="s">    named(&#39;!~&#39;)</span>
<span class="s">    polarity = -1</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="p">(</span><span class="n">s</span> <span class="err">!</span><span class="o">~</span> <span class="n">sub</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">s</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">contain</span> <span class="n">sub</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateStringContains(CorrelateFunction):</span>

<span class="s">    correlates(ContainsSig, (StringDomain, StringDomain),</span>
<span class="s">                            (StringDomain, UntypedDomain),</span>
<span class="s">                            (UntypedDomain, StringDomain),</span>
<span class="s">                            (UntypedDomain, UntypedDomain))</span>
<span class="s">    signature = ContainsSig</span>
<span class="s">    domains = [StringDomain(), StringDomain()]</span>
<span class="s">    codomain = BooleanDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindHeadTailBase(BindPolyFunction):</span>

<span class="s">    signature = None</span>


<span class="s">#DIVIDER</span>
<span class="s">    def correlate(self, op, length):</span>
<span class="s">        if length is not None:</span>
<span class="s">            length = CastBinding(length, coerce(IntegerDomain()), length.syntax)</span>
<span class="s">        binding = FormulaBinding(self.state.scope,</span>
<span class="s">                                 self.signature(), UntypedDomain(),</span>
<span class="s">                                 self.syntax, op=op, length=length)</span>
<span class="s">        correlate = Correlate(binding, self.state)</span>
<span class="s">        return correlate()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindHead(BindPolyFunction):</span>

<span class="s">    named(&#39;head&#39;)</span>
<span class="s">    signature = HeadSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">head</span><span class="p">(</span><span class="n">s</span><span class="p">[,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">the</span> <span class="n">first</span> <span class="n">N</span> <span class="n">elements</span> <span class="n">of</span> <span class="n">s</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindTail(BindPolyFunction):</span>

<span class="s">    named(&#39;tail&#39;)</span>
<span class="s">    signature = TailSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="n">tail</span><span class="p">(</span><span class="n">s</span><span class="p">[,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">the</span> <span class="n">last</span> <span class="n">N</span> <span class="n">elements</span> <span class="n">of</span> <span class="n">s</span><span class="s">&quot;&quot;&quot;</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateHead(CorrelateFunction):</span>

<span class="s">    correlates(HeadSig, UntypedDomain,</span>
<span class="s">                        StringDomain)</span>
<span class="s">    domains = [StringDomain()]</span>
<span class="s">    codomain = StringDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class CorrelateTail(CorrelateFunction):</span>

<span class="s">    correlates(TailSig, UntypedDomain,</span>
<span class="s">                        StringDomain)</span>
<span class="s">    domains = [StringDomain()]</span>
<span class="s">    codomain = StringDomain()</span>



<span class="s">#DIVIDER</span>
<span class="s">class BindSlice(BindPolyFunction):</span>

<span class="s">    named(&#39;slice&#39;)</span>
<span class="s">    signature = SliceSig</span>
<span class="s">    hint = &quot;&quot;&quot;</span><span class="nb">slice</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">slice</span> <span class="n">of</span> <span class="n">s</span> <span class="kn">from</span> <span class="nn">i</span><span class="err">-</span><span class="nn">th</span><span class="err"> </span><span class="nn">to</span><span class="err"> </span><span class="nn">j</span><span class="err">-</span><span class="nn">th</span><span class="err"> </span><span class="nn">elements</span><span class="err">&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-53'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-53">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">IntegerDomain</span><span class="p">()),</span> <span class="n">left</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">IntegerDomain</span><span class="p">()),</span> <span class="n">right</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="n">UntypedDomain</span><span class="p">(),</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="n">right</span><span class="p">)</span>
        <span class="n">correlate</span> <span class="o">=</span> <span class="n">Correlate</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">correlate</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-54'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-54">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateSlice</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">SliceSig</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span>
                         <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-55'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-55">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindAt</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;at&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">AtSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;at(s, i[, len=1]) -&gt; i-th to (i+len)-th elements of s&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-56'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-56">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">IntegerDomain</span><span class="p">()),</span> <span class="n">index</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">IntegerDomain</span><span class="p">()),</span>
                                 <span class="n">length</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="n">UntypedDomain</span><span class="p">(),</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">length</span><span class="p">)</span>
        <span class="n">correlate</span> <span class="o">=</span> <span class="n">Correlate</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">correlate</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-57'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-57">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateAt</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">AtSig</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span>
                      <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-58'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-58">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindReplace</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;replace&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ReplaceSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;replace(s, o, n) -&gt; s with occurences of o replaced by n&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-59'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-59">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateReplace</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ReplaceSig</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span>
                           <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">(),</span> <span class="n">StringDomain</span><span class="p">(),</span> <span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-60'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-60">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindUpper</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;upper&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">UpperSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;upper(s) -&gt; s converted to uppercase&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-61'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-61">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateUpper</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">UpperSig</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span>
                         <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-62'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-62">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindLower</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;lower&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">LowerSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lower(s) -&gt; s converted to lowercase&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-63'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-63">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateLower</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">LowerSig</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span>
                         <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-64'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-64">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindTrimBase</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">TrimSig</span>
    <span class="n">is_left</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">is_right</span> <span class="o">=</span> <span class="bp">False</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-65'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-65">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">is_left</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">is_left</span><span class="p">,</span>
                                   <span class="n">is_right</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">is_right</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                                 <span class="n">signature</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">)</span>
        <span class="n">correlate</span> <span class="o">=</span> <span class="n">Correlate</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">correlate</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-66'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-66">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindTrim</span><span class="p">(</span><span class="n">BindTrimBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;trim&#39;</span><span class="p">)</span>
    <span class="n">is_left</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">is_right</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;trim(s) -&gt; s with leading and trailing whitespaces removed&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-67'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-67">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindLTrim</span><span class="p">(</span><span class="n">BindTrimBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;ltrim&#39;</span><span class="p">)</span>
    <span class="n">is_left</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;ltrim(s) -&gt; s with leading whitespaces removed&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-68'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-68">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindRTrim</span><span class="p">(</span><span class="n">BindTrimBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;rtrim&#39;</span><span class="p">)</span>
    <span class="n">is_right</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;rtrim(s) -&gt; s with trailing whitespaces removed&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-69'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-69">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindToday</span><span class="p">(</span><span class="n">BindMonoFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;today&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">TodaySig</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DateDomain</span><span class="p">()</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;today() -&gt; the current date&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-70'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-70">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindNow</span><span class="p">(</span><span class="n">BindMonoFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;now&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NowSig</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DateTimeDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-71'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-71">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExtractYear</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;year&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExtractYearSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;year(date) -&gt; the year of a given date&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-72'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-72">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExtractMonth</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;month&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExtractMonthSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;month(date) -&gt; the month of a given date&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-73'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-73">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExtractDay</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;day&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExtractDaySig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;day(date) -&gt; the day of a given date&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-74'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-74">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExtractHour</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;hour&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExtractHourSig</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-75'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-75">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExtractMinute</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;minute&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExtractMinuteSig</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-76'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-76">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExtractSecond</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;second&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExtractSecondSig</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-77'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-77">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractYearFromDate</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractYearSig</span><span class="p">,</span> <span class="n">DateDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-78'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-78">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractYearFromDateTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractYearSig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-79'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-79">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractMonthFromDate</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractMonthSig</span><span class="p">,</span> <span class="n">DateDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-80'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-80">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractMonthFromDateTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractMonthSig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-81'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-81">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractDayFromDate</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractDaySig</span><span class="p">,</span> <span class="n">DateDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-82'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-82">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractDayFromDateTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractDaySig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-83'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-83">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractHourFromTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractHourSig</span><span class="p">,</span> <span class="n">TimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-84'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-84">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractHourFromDateTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractHourSig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-85'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-85">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractMinuteFromTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractMinuteSig</span><span class="p">,</span> <span class="n">TimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-86'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-86">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractMinuteFromDateTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractMinuteSig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-87'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-87">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractSecondFromTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractSecondSig</span><span class="p">,</span> <span class="n">TimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">FloatDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-88'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-88">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateExtractSecondFromDateTime</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">ExtractSecondSig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">FloatDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-89'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-89">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateTrim</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">TrimSig</span><span class="p">,</span> <span class="n">UntypedDomain</span><span class="p">,</span>
                        <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-90'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-90">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindIsNull</span><span class="p">(</span><span class="n">BindHomoFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;is_null&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">IsNullSig</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">BooleanDomain</span><span class="p">()</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;is_null(x) -&gt; TRUE if x is NULL&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-91'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-91">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindNullIf</span><span class="p">(</span><span class="n">BindHomoFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;null_if&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">NullIfSig</span><span class="p">()</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;null_if(x, y) -&gt; NULL if x is equal to y; x otherwise&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-92'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-92">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindIfNull</span><span class="p">(</span><span class="n">BindHomoFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;if_null&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">IfNullSig</span><span class="p">()</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if_null(x, y) -&gt; y if x is NULL; x otherwise&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-93'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-93">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindIf</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;if&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">IfSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if(p, c[, ...][, a=NULL]) -&gt; c if p; a otherwise&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-94'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-94">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">operands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">arguments</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">operands</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;not enough arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">predicates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">consequents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">alternative</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">while</span> <span class="n">operands</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">operands</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">alternative</span> <span class="o">=</span> <span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">predicates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
                <span class="n">consequents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
        <span class="k">return</span> <span class="p">{</span>
                <span class="s">&#39;predicates&#39;</span><span class="p">:</span> <span class="n">predicates</span><span class="p">,</span>
                <span class="s">&#39;consequents&#39;</span><span class="p">:</span> <span class="n">consequents</span><span class="p">,</span>
                <span class="s">&#39;alternative&#39;</span><span class="p">:</span> <span class="n">alternative</span><span class="p">,</span>
        <span class="p">}</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-95'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-95">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicates</span><span class="p">,</span> <span class="n">consequents</span><span class="p">,</span> <span class="n">alternative</span><span class="p">):</span>
        <span class="n">predicates</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">BooleanDomain</span><span class="p">()),</span>
                                  <span class="n">predicate</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                      <span class="k">for</span> <span class="n">predicate</span> <span class="ow">in</span> <span class="n">predicates</span><span class="p">]</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">consequent</span><span class="o">.</span><span class="n">domain</span> <span class="k">for</span> <span class="n">consequent</span> <span class="ow">in</span> <span class="n">consequents</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">alternative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">domains</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="o">*</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">domain</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;incompatible arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">consequents</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">consequent</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">consequent</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">consequent</span> <span class="ow">in</span> <span class="n">consequents</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">alternative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">alternative</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">alternative</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">consequent</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="n">domain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="n">predicates</span><span class="o">=</span><span class="n">predicates</span><span class="p">,</span>
                              <span class="n">consequents</span><span class="o">=</span><span class="n">consequents</span><span class="p">,</span>
                              <span class="n">alternative</span><span class="o">=</span><span class="n">alternative</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-96'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-96">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindSwitch</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;switch&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">SwitchSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;switch(x, v, c, [...][, a=NULL]) -&gt; c if x = v; a otherwise&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-97'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-97">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">operands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">arguments</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">operands</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;not enough arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">variants</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">consequents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">alternative</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">operands</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">operands</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">alternative</span> <span class="o">=</span> <span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">variants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
                <span class="n">consequents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operands</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
        <span class="k">return</span> <span class="p">{</span>
                <span class="s">&#39;variable&#39;</span><span class="p">:</span> <span class="n">variable</span><span class="p">,</span>
                <span class="s">&#39;variants&#39;</span><span class="p">:</span> <span class="n">variants</span><span class="p">,</span>
                <span class="s">&#39;consequents&#39;</span><span class="p">:</span> <span class="n">consequents</span><span class="p">,</span>
                <span class="s">&#39;alternative&#39;</span><span class="p">:</span> <span class="n">alternative</span><span class="p">,</span>
        <span class="p">}</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-98'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-98">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">variants</span><span class="p">,</span> <span class="n">consequents</span><span class="p">,</span> <span class="n">alternative</span><span class="p">):</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">variable</span><span class="o">.</span><span class="n">domain</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">variant</span><span class="o">.</span><span class="n">domain</span> <span class="k">for</span> <span class="n">variant</span> <span class="ow">in</span> <span class="n">variants</span><span class="p">]</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="o">*</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">domain</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;incompatible arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="n">variants</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">variant</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">variant</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">variant</span> <span class="ow">in</span> <span class="n">variants</span><span class="p">]</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">consequent</span><span class="o">.</span><span class="n">domain</span> <span class="k">for</span> <span class="n">consequent</span> <span class="ow">in</span> <span class="n">consequents</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">alternative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">domains</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="nb">coerce</span><span class="p">(</span><span class="o">*</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">domain</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;incompatible arguments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
        <span class="n">consequents</span> <span class="o">=</span> <span class="p">[</span><span class="n">CastBinding</span><span class="p">(</span><span class="n">consequent</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">consequent</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">consequent</span> <span class="ow">in</span> <span class="n">consequents</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">alternative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">alternative</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">alternative</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">consequent</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="n">domain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="n">variable</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span>
                              <span class="n">variants</span><span class="o">=</span><span class="n">variants</span><span class="p">,</span>
                              <span class="n">consequents</span><span class="o">=</span><span class="n">consequents</span><span class="p">,</span>
                              <span class="n">alternative</span><span class="o">=</span><span class="n">alternative</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-99'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-99">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExistsBase</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">ExistsSig</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-100'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-100">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">recipies</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">is_hard</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">plural_base</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">recipies</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recipies</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;one operand is expected&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">plural_base</span> <span class="o">=</span> <span class="n">op</span>
            <span class="n">syntax</span><span class="p">,</span> <span class="n">recipe</span> <span class="o">=</span> <span class="n">recipies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">bind</span> <span class="o">=</span> <span class="n">BindByRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">syntax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">bind</span><span class="p">()</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">BooleanDomain</span><span class="p">()),</span> <span class="n">op</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="n">QuantifySig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polarity</span><span class="p">),</span> <span class="n">op</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">plural_base</span><span class="o">=</span><span class="n">plural_base</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-101'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-101">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindExists</span><span class="p">(</span><span class="n">BindExistsBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;exists&#39;</span><span class="p">)</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="o">+</span><span class="mi">1</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.exists(p) -&gt; TRUE if there exists p such that p = TRUE&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-102'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-102">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindEvery</span><span class="p">(</span><span class="n">BindExistsBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;every&#39;</span><span class="p">)</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.every(p) -&gt; TRUE if p = TRUE for every p&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-103'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-103">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindCount</span><span class="p">(</span><span class="n">BindFunction</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;count&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">CountSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.count(p) -&gt; the number of p such that p = TRUE&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-104'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-104">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">recipies</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">is_hard</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">plural_base</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">recipies</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recipies</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;one operand is expected&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">plural_base</span> <span class="o">=</span> <span class="n">op</span>
            <span class="n">syntax</span><span class="p">,</span> <span class="n">recipe</span> <span class="o">=</span> <span class="n">recipies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">bind</span> <span class="o">=</span> <span class="n">BindByRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">syntax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">bind</span><span class="p">()</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">CastBinding</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">BooleanDomain</span><span class="p">()),</span> <span class="n">op</span><span class="o">.</span><span class="n">syntax</span><span class="p">)</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                            <span class="n">CountSig</span><span class="p">(),</span> <span class="nb">coerce</span><span class="p">(</span><span class="n">IntegerDomain</span><span class="p">()),</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="n">AggregateSig</span><span class="p">(),</span> <span class="n">op</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="n">plural_base</span><span class="o">=</span><span class="n">plural_base</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-105'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-105">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindPolyAggregate</span><span class="p">(</span><span class="n">BindPolyFunction</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">UnarySig</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">UntypedDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-106'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-106">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">recipies</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">is_hard</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">plural_base</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">recipies</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recipies</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;one operand is expected&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">plural_base</span> <span class="o">=</span> <span class="n">op</span>
            <span class="n">syntax</span><span class="p">,</span> <span class="n">recipe</span> <span class="o">=</span> <span class="n">recipies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">bind</span> <span class="o">=</span> <span class="n">BindByRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">syntax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">bind</span><span class="p">()</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">codomain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                                 <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">)</span>
        <span class="n">correlate</span> <span class="o">=</span> <span class="n">Correlate</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">correlate</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="n">AggregateSig</span><span class="p">(),</span> <span class="n">binding</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="n">binding</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="n">plural_base</span><span class="o">=</span><span class="n">plural_base</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">binding</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-107'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-107">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindMinMaxBase</span><span class="p">(</span><span class="n">BindPolyAggregate</span><span class="p">):</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="bp">None</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-108'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-108">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">correlate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="n">recipies</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">is_hard</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">plural_base</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">recipies</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recipies</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BindError</span><span class="p">(</span><span class="s">&quot;one operand is expected&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">plural_base</span> <span class="o">=</span> <span class="n">op</span>
            <span class="n">syntax</span><span class="p">,</span> <span class="n">recipe</span> <span class="o">=</span> <span class="n">recipies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">bind</span> <span class="o">=</span> <span class="n">BindByRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">syntax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">bind</span><span class="p">()</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polarity</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">codomain</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">)</span>
        <span class="n">correlate</span> <span class="o">=</span> <span class="n">Correlate</span><span class="p">(</span><span class="n">binding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="n">binding</span> <span class="o">=</span> <span class="n">correlate</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">FormulaBinding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                              <span class="n">AggregateSig</span><span class="p">(),</span> <span class="n">binding</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="n">binding</span><span class="o">.</span><span class="n">syntax</span><span class="p">,</span>
                              <span class="n">plural_base</span><span class="o">=</span><span class="n">plural_base</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">binding</span><span class="p">)</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-109'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-109">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindMinMaxBase</span><span class="p">(</span><span class="n">BindMinMaxBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;min&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="o">+</span><span class="mi">1</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.min(x) -&gt; the minimal value in the set of x&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-110'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-110">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindMinMaxBase</span><span class="p">(</span><span class="n">BindMinMaxBase</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;max&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.avg(x) -&gt; the maximal value in the set of x&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-111'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-111">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateIntegerMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">IntegerDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">IntegerDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-112'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-112">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateDecimalMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">DecimalDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DecimalDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DecimalDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-113'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-113">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateFloatMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">FloatDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">FloatDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">FloatDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-114'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-114">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateStringMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">StringDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">StringDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">StringDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-115'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-115">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateDateMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">DateDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DateDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-116'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-116">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateTimeMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">TimeDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">TimeDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-117'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-117">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateDateTimeMinMax</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">MinMaxSig</span><span class="p">,</span> <span class="n">DateTimeDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">MinMaxSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateTimeDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DateTimeDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-118'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-118">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindSum</span><span class="p">(</span><span class="n">BindPolyAggregate</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;sum&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">SumSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.sum(x) -&gt; the sum of x&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-119'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-119">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateIntegerSum</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">SumSig</span><span class="p">,</span> <span class="n">IntegerDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">SumSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">IntegerDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">IntegerDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-120'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-120">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateDecimalSum</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">SumSig</span><span class="p">,</span> <span class="n">DecimalDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">SumSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DecimalDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DecimalDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-121'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-121">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateFloatSum</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">SumSig</span><span class="p">,</span> <span class="n">FloatDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">SumSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">FloatDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">FloatDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-122'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-122">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">BindAvg</span><span class="p">(</span><span class="n">BindPolyAggregate</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&#39;avg&#39;</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">AvgSig</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;base.avg(x) -&gt; the average value of x&quot;&quot;&quot;</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-123'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-123">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateDecimalAvg</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">AvgSig</span><span class="p">,</span> <span class="n">IntegerDomain</span><span class="p">,</span>
                       <span class="n">DecimalDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">AvgSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">DecimalDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">DecimalDomain</span><span class="p">()</span></pre></div></pre></div>
      </td>
    </tr><tr id='section-124'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-124">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre><span class="k">class</span> <span class="nc">CorrelateFloatAvg</span><span class="p">(</span><span class="n">CorrelateFunction</span><span class="p">):</span>

    <span class="n">correlates</span><span class="p">(</span><span class="n">AvgSig</span><span class="p">,</span> <span class="n">FloatDomain</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">AvgSig</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">FloatDomain</span><span class="p">()]</span>
    <span class="n">codomain</span> <span class="o">=</span> <span class="n">FloatDomain</span><span class="p">()</span>

</pre></div></pre></div>
      </td>
    </tr><tr id='section-125'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-125">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-126'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-126">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-127'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-127">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-128'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-128">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-129'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-129">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-130'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-130">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-131'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-131">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-132'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-132">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-133'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-133">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-134'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-134">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-135'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-135">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-136'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-136">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-137'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-137">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-138'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-138">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-139'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-139">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-140'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-140">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-141'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-141">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-142'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-142">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-143'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-143">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-144'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-144">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-145'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-145">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-146'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-146">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-147'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-147">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-148'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-148">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-149'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-149">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-150'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-150">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-151'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-151">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-152'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-152">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-153'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-153">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-154'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-154">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-155'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-155">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-156'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-156">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-157'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-157">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-158'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-158">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-159'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-159">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-160'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-160">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-161'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-161">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-162'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-162">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-163'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-163">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-164'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-164">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-165'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-165">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-166'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-166">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-167'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-167">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-168'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-168">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-169'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-169">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-170'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-170">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-171'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-171">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-172'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-172">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-173'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-173">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-174'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-174">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-175'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-175">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-176'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-176">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-177'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-177">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-178'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-178">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-179'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-179">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-180'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-180">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-181'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-181">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-182'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-182">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-183'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-183">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-184'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-184">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-185'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-185">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-186'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-186">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-187'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-187">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-188'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-188">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-189'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-189">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-190'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-190">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-191'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-191">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-192'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-192">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-193'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-193">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-194'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-194">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-195'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-195">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-196'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-196">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-197'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-197">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-198'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-198">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-199'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-199">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-200'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-200">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-201'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-201">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-202'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-202">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-203'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-203">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-204'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-204">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-205'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-205">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-206'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-206">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-207'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-207">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-208'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-208">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-209'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-209">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-210'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-210">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-211'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-211">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-212'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-212">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-213'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-213">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-214'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-214">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-215'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-215">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-216'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-216">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-217'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-217">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-218'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-218">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-219'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-219">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-220'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-220">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-221'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-221">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-222'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-222">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-223'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-223">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-224'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-224">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-225'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-225">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-226'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-226">#</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
